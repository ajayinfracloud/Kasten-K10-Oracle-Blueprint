
// Create database

CREATE TABLE cx_people (
 id NUMBER GENERATED BY DEFAULT AS identity,
 name VARCHAR2(20),
 age NUMBER,
 notes VARCHAR2(100)
)
/
 
ALTER TABLE CX_PEOPLE
ADD CONSTRAINT PK_CX_PEOPLE PRIMARY KEY ("ID")
/
 
CREATE TABLE CX_PETS (
 id NUMBER GENERATED BY DEFAULT AS IDENTITY,
 name VARCHAR2(20),
 owner NUMBER,
 type VARCHAR2(100)
)
/
 
ALTER TABLE CX_PETS ADD CONSTRAINT PK_CX_PETS PRIMARY KEY ("ID")
/
 
ALTER TABLE CX_PETS ADD CONSTRAINT FK_CX_PETS_OWNER FOREIGN KEY ("OWNER") REFERENCES "CX_PEOPLE" ("ID")
/
 
INSERT INTO cx_people (name, age, notes)
 VALUES ('Bob', 35, 'I like dogs')
/
 
INSERT INTO cx_people (name, age, notes)
 VALUES ('Kim', 27, 'I like birds')
/
 
INSERT INTO cx_pets (name, owner, type)
 VALUES ('Duke', 1, 'dog')
/
 
INSERT INTO cx_pets (name, owner, type)
 VALUES ('Pepe', 2, 'bird')
/
 
COMMIT
/


// Create sql script to insert data

cat > sample.sql << EOF
INSERT INTO cx_pets (name, owner, type) VALUES ('Pepe', 2, 'bird');
INSERT INTO cx_people (name, age, notes) VALUES ('Kim', 27, 'I like birds');
Exit;
EOF


// Create sh file to execute script after time interval

cat > insertscript.sh  << EOF
#!/bin/bash
while true; do
sqlplus sys/Kube#2020@192.168.99.100:30491/PSTG.localdomain as sysdba @sample.sql
sleep 5;
done
EOF


// Run sh file in background

nohup sh insertscript.sh &